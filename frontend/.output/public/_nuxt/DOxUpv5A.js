import{_ as H}from"./LtRXCDUn.js";import{n as T,r as p,o as _,c as x,a as e,b as h,w as c,t as f,J as M,q as a,F as O,E as P,H as E,K as R,d as b,z as k,A as D,B as $,y as Y,_ as G}from"./6xwa8bmz.js";import{_ as j}from"./CBpX8QQE.js";import{u as J}from"./DoqhGSxU.js";import"./DlAUqK2U.js";const K={class:"fixed bg-black bg-opacity-60 left-0 right-0 bottom-0 top-0 z-30 flex justify-center items-center"},Q={class:"flex justify-between mb-4 text-lg"},W={class:"font-bold"},X=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-x"},[e("path",{d:"M18 6 6 18"}),e("path",{d:"m6 6 12 12"})],-1),Z=[X],ee=T({__name:"Dialog",props:{title:{type:String,default:""}},emits:["close"],setup(C,{emit:y}){const u=p(null),g=y,v=C,n=()=>{var i,s;(i=u.value)==null||i.classList.add("zoom-out"),(s=u.value)==null||s.addEventListener("animationend",()=>{var o;(o=u.value)==null||o.classList.remove("zoom-out"),g("close")})};return(i,s)=>{const o=j;return _(),x("div",K,[e("div",{onClick:n,class:"fixed left-0 right-0 bottom-0 top-0"}),e("div",{class:"w-11/12 md:w-auto md:min-w-[500px] zoom-in z-10",ref_key:"dialog",ref:u},[h(o,{class:"w-full bg-[#09090b]"},{default:c(()=>[e("div",Q,[e("span",W,f(v.title),1),e("button",{onClick:n},Z)]),M(i.$slots,"default")]),_:3})],512)])}}}),te={class:"h-full"},oe={class:"p-8"},se={class:"mb-8 flex justify-between items-center"},ae=e("div",{class:"text-3xl font-bold"}," Domain ",-1),ne={class:"flex gap-2"},le={class:"flex flex-col gap-4"},ie={key:0},de={key:1},ce={class:"text-gray-400 mb-3 text-sm"},re={class:"text-lg mb-2"},me={class:"text-gray-400 mb-1"},_e={class:"flex justify-between items-center"},ue={class:"flex gap-3"},pe=e("span",{class:"text-sm text-gray-400 group-hover:text-white mr-1"},"API",-1),he={class:"text-sm text-gray-200 group-hover:text-white"},fe=e("div",null,[e("span",{class:"text-sm text-gray-400 mr-1"},"Request"),e("span",{class:"text-sm text-gray-200"},"4")],-1),ve={class:"flex gap-2"},xe={for:"name"},ge=e("div",{class:"mb-2 text-sm"},"Name",-1),be={for:"domain"},ye=e("div",{class:"mb-2 text-sm"},"Doamin",-1),we={for:"description"},ke=e("div",{class:"mb-2 text-sm"},"Description",-1),De={class:"flex justify-end gap-2 mt-4"},Ae=T({__name:"index",setup(C){const{data:y,pending:u,error:g,refresh:v}=J("/api/domain","$YthYt9THGv"),n=p(!1),i=p("Add domain"),s=p(""),o=p(""),r=p("");let w;const A=()=>{i.value="Add domain",w=B,n.value=!0},B=async()=>{await $fetch("/api/domain",{method:"POST",headers:{"Content-Type":"application/json"},body:{name:s.value,domain:o.value,desc:r.value}}),v(),n.value=!1},L=async m=>{await $fetch(`/api/domain/${m}`,{method:"DELETE"}),v()},N=async m=>{const d=(await $fetch(`/api/domain/${m}`)).data;s.value=d.name,o.value=d.domain,r.value=d.desc,w=()=>V(m),i.value="Edit domain",n.value=!0},V=async m=>{await $fetch(`/api/domain/${m}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:{name:s.value,domain:o.value,desc:r.value}}),v(),n.value=!1},z=()=>{s.value="",o.value="",r.value="",n.value=!1};return(m,l)=>{const d=H,S=G,I=j,U=ee;return _(),x("div",te,[e("div",oe,[e("div",se,[ae,e("div",ne,[h(d,{onClick:A},{default:c(()=>[b(" Add ")]),_:1})])]),e("div",le,[a(u)?(_(),x("div",ie," Loading... ")):a(g)?(_(),x("div",de,f(a(g)),1)):(_(!0),x(O,{key:2},P(a(y).data,(t,q)=>(_(),E(I,{key:q},{default:c(()=>[e("div",ce,f(t.domain),1),e("div",re,f(t.name),1),e("div",me,f(t.desc),1),e("div",_e,[e("div",ue,[h(S,{class:"group",to:{path:`/domain/${t.ID}`}},{default:c(()=>[pe,e("span",he,f(t.api_count),1)]),_:2},1032,["to"]),fe]),e("div",ve,[h(d,{onClick:F=>N(t.ID)},{default:c(()=>[b("Edit")]),_:2},1032,["onClick"]),h(d,{onClick:F=>L(t.ID)},{default:c(()=>[b("Delete")]),_:2},1032,["onClick"])])])]),_:2},1024))),128))])]),a(n)?(_(),E(U,{key:0,onClose:z,title:a(i)},{default:c(()=>[e("form",{onSubmit:l[3]||(l[3]=Y(t=>a(w)(),["prevent"])),class:"flex flex-col gap-3"},[e("label",xe,[ge,k(e("input",{type:"text",id:"name",placeholder:"Name","onUpdate:modelValue":l[0]||(l[0]=t=>$(s)?s.value=t:null),class:"w-full px-3 py-1 text-white bg-transparent border border-white border-opacity-20 rounded-md"},null,512),[[D,a(s)]])]),e("label",be,[ye,k(e("input",{type:"text",id:"domain",placeholder:"www.example.com","onUpdate:modelValue":l[1]||(l[1]=t=>$(o)?o.value=t:null),class:"w-full px-3 py-1 text-white bg-transparent border border-white border-opacity-20 rounded-md",required:""},null,512),[[D,a(o)]])]),e("label",we,[ke,k(e("textarea",{type:"text",id:"description",placeholder:"Description","onUpdate:modelValue":l[2]||(l[2]=t=>$(r)?r.value=t:null),class:"w-full px-3 py-1 text-white bg-transparent border border-white border-opacity-20 rounded-md"},`\r
                        `,512),[[D,a(r)]])]),e("div",De,[h(d,null,{default:c(()=>[b(" Save ")]),_:1})])],32)]),_:1},8,["title"])):R("",!0)])}}});export{Ae as default};
